<!doctype html><html lang=en-us><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/iAWriterQuattro/iAWriterQuattroS-Bold.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/iAWriterQuattro/iAWriterQuattroS-BoldItalic.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/iAWriterQuattro/iAWriterQuattroS-Italic.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/iAWriterQuattro/iAWriterQuattroS-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Making GNOME Shell Extensions | Lukas Knuth // Developer</title><link rel=canonical href=https://lknuth.dev/writings/making_gnome_shell_extensions/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Making GNOME Shell Extensions"><meta property="og:description" content="Getting started on making GNOME Shell Extensions"><meta property="og:type" content="article"><meta property="og:url" content="https://lknuth.dev/writings/making_gnome_shell_extensions/"><meta property="article:section" content="writings"><meta property="article:published_time" content="2013-02-09T15:57:38+01:00"><meta property="article:modified_time" content="2013-02-09T15:57:38+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Making GNOME Shell Extensions"><meta name=twitter:description content="Getting started on making GNOME Shell Extensions"><link rel=stylesheet href=https://lknuth.dev/css/styles.b80ba81354db091030af4b414bd9c1e0d6f77eb68cfa9470c580bd78bb96e7ae8b9ab256585ee48b3450eb59ff26dea067f26ae15be318c24227a3ea1145bf99.css integrity="sha512-uAuoE1TbCRAwr0tBS9nB4Nb3fraM+pRwxYC9eLuW566LmrJWWF7kizRQ61n/Jt6gZ/Jq4VvjGMJCJ6PqEUW/mQ=="><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://lknuth.dev/images/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><header id=header><a href=https://lknuth.dev/><div id=logo style=background-image:url(https://lknuth.dev/images/logo.png)></div><div id=title><h1>Lukas Knuth // Developer</h1></div></a><div id=nav><ul><li class=icon><a href=# aria-label=Menu><i class="fas fa-bars fa-2x" aria-hidden=true></i></a></li><li><a href=/writings>Writings</a></li><li><a href=/about>About</a></li><li><a href=/cv>CV</a></li><li><a href=/imprint>Imprint</a></li></ul></div></header><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Making GNOME Shell Extensions</h1><div class=meta><div class=postdate><time datetime="2013-02-09 15:57:38 +0100 +0100" itemprop=datePublished>2013-02-09</time></div></div></header><div class=content itemprop=articleBody><p>I like the GNOME Shell and I&rsquo;ve liked it since it was in the &ldquo;testing&rdquo;-repo of ArchLinux. It&rsquo;s a fast and aesthetic desktop environment. But it&rsquo;s a long way from offering everything you&rsquo;d like to have. Luckily, it can be extended.</p><div class=important><p>The following advices, instructions or sources where compiled when <b>GNOME Shell 3.6.2</b> was the latest version. While specific information here might be outdated, the general idea still holds value today.</p></div><p><strong>Note that this is not a real step-by-step guide</strong> on how to create your first extension. There are many of those out there and I would just repeat them. Instead, this is more like an advice-collection on different aspects of creating extensions. So, <strong>be sure to check the links</strong>.</p><h2 id=basics>Basics</h2><p>Getting into the development of GNOME Shell Extensions is a little hard. The documentation is mostly not available or outdated.</p><p>Here are some sources which helped me to get started (and through development):</p><ul><li><a href=https://live.gnome.org/GnomeShell/Extensions><strong>Basic stuff on extensions</strong></a></li><li><a href=https://live.gnome.org/GnomeShell/Development>Basic stuff on development</a></li><li><a href=https://live.gnome.org/GnomeShell/Extensions/StepByStepTutorial>Step-by-step tutorial</a></li><li><a href=https://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/index.html><strong>Inofficial documentation for the JavaScript bindings of many libraries</strong></a></li><li><a href=https://gjs-docs.gnome.org/><strong>Official (but partial) documentation for JavaScript bindings</strong></a></li><li><a href=https://blog.mecheye.net/2012/02/requirements-and-tips-for-getting-your-gnome-shell-extension-approved/>Some inofficial guidelines to get your extension on extensions.gnome.org</a></li></ul><p>Be sure to defiantly check out the bold links in the list.</p><h2 id=getting-stuff-done>Getting stuff done</h2><p>Above all, if you&rsquo;re serious about creating your extension: <a href=https://www.codinghorror.com/blog/2012/04/learn-to-read-the-source-luke.html><strong>Learn to read the source, Luke</strong></a>.</p><p>When trying to get actual work done on your extension, try consulting the docs (if existing) or search the <a href=https://extensions.gnome.org>extension repos</a> for extensions which do similar things to what you want to do, and <strong>look at their sources</strong>. Most of them are hosted on GitHub or Bitbucket, but you can also install them and find the sources under <code>~/.local/share/gnome-shell/extensions/&lt;extension-UUID>/</code>.</p><p>When searching for a specific function, or more documentation on a particular function, you can also consult manuals for bindings in different languages (thought the parameters and return-values might not match exactly).</p><h3 id=making-user-interfaces>Making user interfaces</h3><p>To get a native look-and-feel with the Shell, extensions can use St (= Shell Toolkit) to create UIs for everything that integrates with the Shell itself, and Gtk for the extension-preferences.</p><p><em>Some</em> Documentation is now available over at <a href=https://gjs-docs.gnome.org/st10~1.0_api/>the Gnome Docs</a>. It is however just a reference, which makes it hard to discover functionality. For some guidance, check out this (<strong>older</strong>) <a href=https://mathematicalcoffee.blogspot.de/2012/09/gnome-shell-javascript-source.html>explanation of the St components</a>. Reading <strong>a lot of source-code</strong> is still required. See the <a href=https://git.gnome.org/browse/gnome-shell/tree/js>GNOME Shell Sources</a>.</p><p>Documentation on Gtk&rsquo;s JavaScript binding (which you&rsquo;ll use for the extension-preferences) can be found in the <a href=http://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/Gtk.html>in-official library docs</a>.</p><h2 id=debugging>Debugging</h2><p><strong>LookingGlass is not particularly helpful.</strong> It only shows one line of an exception (the description) and only if they occur at startup time (when your extension is first started).</p><p>Instead, for full StackTraces and runtime-exceptions, <strong>consult the session-logfile</strong>. It might be very long and bloated, so I use this <a href=https://bitbucket.org/LukasKnuth/backslide/src/561b1dbe542a/session-error.sh>handy script</a> to read it:</p><div class=highlight><pre tabindex=0 style=color:#fe640b;background-color:#eff1f5;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#acb0be;font-style:italic># Grabs the last session-errors from the current X11 session.</span>
</span></span><span style=display:flex><span><span style=color:#acb0be;font-style:italic># This includes full Stack-Trace of gnome-shell-extension errors.</span>
</span></span><span style=display:flex><span><span style=color:#acb0be;font-style:italic># See https://live.gnome.org/GnomeShell/Extensions/StepByStepTutorial#lookingGlass</span>
</span></span><span style=display:flex><span>tail -n100 ~/.cache/gdm/session.log <span style=color:#4c4f69>|</span> less
</span></span></code></pre></div><p><strong>Should your extension crash the whole Shell</strong>, the <code>session.log</code>-file will not contain information on it, because when the shell restarts, a new log-file is created. Go get information on what crashed the shell, check the <code>~/.cache/gdm/session.log.old</code>-file.</p><p>For <strong>debugging the prefs-part</strong> of your extension, you can launch the preferences by using the <code>gnome-shell-extension-prefs</code>-tool from a terminal. Any exceptions will be output to the console. Additionally, you can also call the tool like <code>gnome-shell-extension-prefs [uuid]</code> to directly show your extensions preferences.</p><p>Since there is currently no real way of debugging with breakpoints (there is, but <a href=https://live.gnome.org/GnomeShell/Debugging>it&rsquo;s tricky</a>), you can <strong>log to the console</strong>, using the <code>print()</code>-function. You will see the output as mentioned above (either in the session-logfile or on the terminal when starting <code>gnome-shell-extension-prefs</code>-tool).</p><h2 id=the-future>The future</h2><p>At the &ldquo;GNOME Developer Experience Hackfest&rdquo; in Februrary 2013, JavaScript was chosen to be the &ldquo;officially supported language&rdquo; for creating applications for GNOME:</p><blockquote><p><strong>JavaScript</strong></p><p>Practically any high-level, garbage-collected language is much better than plain C,
in terms of productivity, once you get used to the idiosyncrasies of the bindings
to the Gnome libraries.</p><p>So, <strong>I&rsquo;m very happy that we have a high-level language [JavaScript] accepted as
officially supported for Gnome.</strong> I was kind of surprised that Python, our de-facto
and historically &ldquo;best supported binding&rdquo; wasn&rsquo;t chosen, but if <strong>this means that
another high-level language can get as much work put into it</strong>, then all the better.</p><p><a href=https://people.gnome.org/~federico/news-2013-02.html#dx-hackfest>(Source)</a></p></blockquote><p>So, there is hope that the API documentation will improve very soon.</p><h2 id=conclusion>Conclusion</h2><ul><li>Above all: <strong>Read the sources!</strong></li><li>Check out other extension&rsquo;s sources and learn from them.</li><li>Don&rsquo;t get frustrated by the documentation. Read sources instead.</li><li>You can ask specific questions on <a href=https://stackoverflow.com/questions/tagged/gnome-shell-extensions>StackOverflow [gnome-shell-extensions]</a></li></ul><p>Although it might be a little hard to get into it, the extension framework is quite powerful. Have <strong>fun</strong>!</p></div></article><footer id=footer><div class=footer-left>Copyright &copy; 2024 Lukas Knuth</div><div class=footer-right><nav><ul><li><a href=/writings>Writings</a></li><li><a href=/about>About</a></li><li><a href=/cv>CV</a></li><li><a href=/imprint>Imprint</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script></html>