{{ define "main"}}
<svg aria-hidden="true" style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<symbol id="icon-rss" viewBox="0 0 32 32">
<path d="M29 0h-26c-1.65 0-3 1.35-3 3v26c0 1.65 1.35 3 3 3h26c1.65 0 3-1.35 3-3v-26c0-1.65-1.35-3-3-3zM8.719 25.975c-1.5 0-2.719-1.206-2.719-2.706 0-1.488 1.219-2.712 2.719-2.712 1.506 0 2.719 1.225 2.719 2.712 0 1.5-1.219 2.706-2.719 2.706zM15.544 26c0-2.556-0.994-4.962-2.794-6.762-1.806-1.806-4.2-2.8-6.75-2.8v-3.912c7.425 0 13.475 6.044 13.475 13.475h-3.931zM22.488 26c0-9.094-7.394-16.5-16.481-16.5v-3.912c11.25 0 20.406 9.162 20.406 20.413h-3.925z"></path>
</symbol>
</defs>
</svg>

<section class="h-spaced mb-2 lg:flex justify-between">
  <span class="lg:block">{{ .Summary }}</span>
  {{- with .OutputFormats.Get "rss" }}
  <a href="{{ .RelPermalink }}" class="lg:block items-center fill-writing hover:fill-primary" title="via RSS">
    <span class="underline">Subscribe</span>
    <svg class="w-5 h-5 inline-block align-text-bottom stroke-0">
      <use xlink:href="#icon-rss"></use>
    </svg>
  </a>
  {{- end }}
</section>

<section id="pick-filters" class="h-spaced mb-4">
  <ul>
    {{/*
      `$` refers to the page being rendered, `.` is the section we're looking at.
      If they are the same, we're on the specific section page now - activate the filter.
    */}}
    {{- with .GetPage "picks" }}
      <li class="filter {{ if eq $ . }}active{{ end }} mr-2 mb-2 inline-block">
        <a href="{{ .RelPermalink }}">All</a>
      </li>
      {{- range .Sections.ByTitle }}
      	<li class="filter {{ if eq $ .}}active{{ end }} mr-2 mb-2 inline-block">
          <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
        </li>
      {{- end }}
    {{- end }}
  </ul>
</section>

<section id="picks" class="h-spaced mb-4">
  <div class="grid gap-3 grid-cols-2 sm:grid-cols-3 md:grid-cols-4">
  {{- $pages := sort .RegularPagesRecursive "Date" "desc" }}
  {{- $paginator := .Paginate $pages 25 }}
  {{- range $paginator.Pages }}
  {{ partial "picks/cover.html" . }}
  {{- end }}
  {{- if $paginator.HasNext }}
    <a class="block relative grow rounded-md bg-surface/40" href="{{ $paginator.Next.URL }}">
      <span class="py-0.5 px-1 absolute bottom-0 left-0 right-0 text-center">More...</span>
    </a>
  {{- end }}
  </div>
</section>
{{ end }}
